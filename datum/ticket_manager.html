<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/ticket_manager - BandaStation</title></head><body><header><a href="index.html">BandaStation</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/ticket_manager.html#var">Var Details</a> - <a href="datum/ticket_manager.html#proc">Proc Details</a></header><main><h1>ticket_manager <aside>/<a href="datum.html">datum</a>/<a href="datum/ticket_manager.html">ticket_manager</a></aside> <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_ui.dm#L4"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_ui.dm 4"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/ticket_manager.html#var/all_tickets">all_tickets</a></th><td>The set of all  tickets</td></tr><tr><th><a href="datum/ticket_manager.html#var/emojis">emojis</a></th><td>The set of all available emojis</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/ticket_manager.html#proc/add_ticket_message">add_ticket_message</a></th><td>Adds message to ticket. Allows HTML tags from both sides and parses emoji
Will send chat message about new ticket message to admin, if reply from ticket initiator
and message to player if replies someone from admins</td></tr><tr><th><a href="datum/ticket_manager.html#proc/add_to_ticket_writers">add_to_ticket_writers</a></th><td>Adds user to ticket writers when he starts typing. Used for type indicator in ticket chat UI</td></tr><tr><th><a href="datum/ticket_manager.html#proc/client_login">client_login</a></th><td>Adds little notification to ticket chat about player reconnect</td></tr><tr><th><a href="datum/ticket_manager.html#proc/client_logout">client_logout</a></th><td>Adds little notification to ticket chat about player disconnect</td></tr><tr><th><a href="datum/ticket_manager.html#proc/get_help_ticket_by_id">get_help_ticket_by_id</a></th><td>Returns <code>/datum/help_ticket</code> by id from <code>all_tickets</code></td></tr><tr><th><a href="datum/ticket_manager.html#proc/open_ticket">open_ticket</a></th><td>Checking existing user ticket, and send message to it IF staff has written something</td></tr><tr><th><a href="datum/ticket_manager.html#proc/remove_from_ticket_writers">remove_from_ticket_writers</a></th><td>Removes user from ticket writers when he stops typing or sends message. Used for type indicator in ticket chat UI</td></tr><tr><th><a href="datum/ticket_manager.html#proc/send_chat_message_to_admin">send_chat_message_to_admin</a></th><td>Send player ticket reply to admin, if he's online. And make some logs for other admins</td></tr><tr><th><a href="datum/ticket_manager.html#proc/send_chat_message_to_player">send_chat_message_to_player</a></th><td>Send admin ticket reply to player, if he's online. And make some logs for other admins</td></tr><tr><th><a href="datum/ticket_manager.html#proc/set_ticket_state">set_ticket_state</a></th><td>Changes ticket state. Allowed new states: TICKET_OPEN, TICKET_CLOSED, TICKET_RESOLVED</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/all_tickets"><aside class="declaration">var </aside>all_tickets <aside>– /alist</aside> <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_ui.dm#L8"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_ui.dm 8"></a></h3><p>The set of all  tickets</p><h3 id="var/emojis"><aside class="declaration">var </aside>emojis <aside>– /list</aside> <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_ui.dm#L6"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_ui.dm 6"></a></h3><p>The set of all available emojis</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_ticket_message"><aside class="declaration">proc </aside>add_ticket_message<aside>(/<a href="client.html">client</a>/sender, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, message)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L119"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 119"></a></aside></h3><p>Adds message to ticket. Allows HTML tags from both sides and parses emoji
Will send chat message about new ticket message to admin, if reply from ticket initiator
and message to player if replies someone from admins</p><h3 id="proc/add_to_ticket_writers"><aside class="declaration">proc </aside>add_to_ticket_writers<aside>(/<a href="client.html">client</a>/writer, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, update_ui)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L91"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 91"></a></aside></h3><p>Adds user to ticket writers when he starts typing. Used for type indicator in ticket chat UI</p><h3 id="proc/client_login"><aside class="declaration">proc </aside>client_login<aside>(/<a href="datum.html">datum</a>/<a href="datum/persistent_client.html">persistent_client</a>/p_client)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L231"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 231"></a></aside></h3><p>Adds little notification to ticket chat about player reconnect</p><h3 id="proc/client_logout"><aside class="declaration">proc </aside>client_logout<aside>(/<a href="datum.html">datum</a>/<a href="datum/persistent_client.html">persistent_client</a>/p_client)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L211"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 211"></a></aside></h3><p>Adds little notification to ticket chat about player disconnect</p><h3 id="proc/get_help_ticket_by_id"><aside class="declaration">proc </aside>get_help_ticket_by_id<aside>(help_ticket_id)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L2"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 2"></a></aside></h3><p>Returns <code>/datum/help_ticket</code> by id from <code>all_tickets</code></p><h3 id="proc/open_ticket"><aside class="declaration">proc </aside>open_ticket<aside>(/<a href="client.html">client</a>/staff, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/target_ticket, message)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L325"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 325"></a></aside></h3><p>Checking existing user ticket, and send message to it IF staff has written something</p><h3 id="proc/remove_from_ticket_writers"><aside class="declaration">proc </aside>remove_from_ticket_writers<aside>(/<a href="client.html">client</a>/writer, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, update_ui)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L104"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 104"></a></aside></h3><p>Removes user from ticket writers when he stops typing or sends message. Used for type indicator in ticket chat UI</p><h3 id="proc/send_chat_message_to_admin"><aside class="declaration">proc </aside>send_chat_message_to_admin<aside>(/<a href="client.html">client</a>/player, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, raw_message)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L284"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 284"></a></aside></h3><p>Send player ticket reply to admin, if he's online. And make some logs for other admins</p><h3 id="proc/send_chat_message_to_player"><aside class="declaration">proc </aside>send_chat_message_to_player<aside>(/<a href="client.html">client</a>/admin, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, raw_message)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L249"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 249"></a></aside></h3><p>Send admin ticket reply to player, if he's online. And make some logs for other admins</p><h3 id="proc/set_ticket_state"><aside class="declaration">proc </aside>set_ticket_state<aside>(/<a href="client.html">client</a>/admin, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, new_state)  <a href="https://github.com/ss220club/BandaStation/blob/49748ba54f5ca27d09ca2fddd649e3d9b02fb728/modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm#L146"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/ticket_manager/manager_helpers.dm 146"></a></aside></h3><p>Changes ticket state. Allowed new states: TICKET_OPEN, TICKET_CLOSED, TICKET_RESOLVED</p></main><footer>tgstation.dme <a href="https://github.com/ss220club/BandaStation/tree/49748ba54f5ca27d09ca2fddd649e3d9b02fb728">49748ba</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>